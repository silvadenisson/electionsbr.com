<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Introduction to the electionsBR package • electionsBR</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Introduction to the electionsBR package">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">electionsBR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.5.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/introduction.html">Introduction to the electionsBR package</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/silvadenisson/electionsBR/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Introduction to the electionsBR package</h1>
                        <h4 data-toc-skip class="author">Fernando
Meireles, Denisson Silva, Beatriz Costa</h4>
            
            <h4 data-toc-skip class="date">2024-11-18</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/silvadenisson/electionsBR/blob/HEAD/vignettes/introduction.Rmd" class="external-link"><code>vignettes/introduction.Rmd</code></a></small>
      <div class="d-none name"><code>introduction.Rmd</code></div>
    </div>

    
    
<p>Thanks to the Superior Electoral Court (TSE), any person with an
internet connection can access a wide range of Brazil’s electoral data.
However, the TSE website used to lack a user-friendly interface, and the
data was not available in a tidy format until very recently, which made
it difficult to use these data in <code>R</code> for research purposes.
In a nutshell, this was our main motivation to develop the
<code>electionsBR</code>, an <code>R</code> package specifically
designed to retrieve and clean Brazilian electoral data directly from
the TSE website, making it easy and fast to obtain electoral data in a
tidy format.</p>
<p>At its core, <code>electionsBR</code> provides a comprehensive set of
functions that download and clean various types of information using
modern backends available in <code>R</code> to handle data retrieving,
importing, and transforming. With this, users can access data that
includes candidates’ personal and professional backgrounds, parties’
electoral performances, electoral coalitions, available seats under
dispute, and voters’ profiles.</p>
<p>In what follows, we provide a brief overview of the package’s main
features. For a complete list of functions, see the <a href="https://cran.r-project.org/package=electionsBR" class="external-link">package’s
reference manual</a>.</p>
<div class="section level2">
<h2 id="how-to-install">How to install<a class="anchor" aria-label="anchor" href="#how-to-install"></a>
</h2>
<p>Since version <code>0.1.1</code>, the easiest way to install
<code>electionsBR</code> is to use the <code>install.packages</code>
function:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"electionsBR"</span><span class="op">)</span></span></code></pre></div>
<p>Frequently, however, the CRAN version is not the most recent one. In
these cases, pre-release versions from <a href="https://github.com/" class="external-link">GitHub</a>, you can use the following
command:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="st"><a href="https://devtools.r-lib.org/" class="external-link">"devtools"</a></span><span class="op">)</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"devtools"</span><span class="op">)</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"silvadenisson/electionsBR"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a>
</h2>
<p>No previous experience with <code>R</code> is required to use the
<code>electionsBR</code> package. In fact, it only takes two lines of
code to download, clean, and export Brazilian electoral data in <a href="https://www.stata.com/" class="external-link">Stata</a> and <a href="https://www.ibm.com/spss" class="external-link">SPSS</a> formats. For example, you can
easily obtain a complete and tidy dataset with candidates’ background
information for the 2010 Federal election using the following code:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"electionsBR"</span><span class="op">)</span></span>
<span><span class="fu">electionsBR</span><span class="fu">::</span><span class="fu"><a href="../reference/elections_tse.html">elections_tse</a></span><span class="op">(</span>year <span class="op">=</span> <span class="fl">2010</span>, type <span class="op">=</span> <span class="st">"candidate"</span>, export <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>By setting the <code>export</code> argument to <code>TRUE</code> in
the <code>elections_tse</code> function, the package will download and
clean the relevant data directly from the TSE website and save it in the
<code>R</code> working directory (the function automatically tells the
user where this directory is located) in two different files:</p>
<ol style="list-style-type: decimal">
<li>
<code>electoral_data.dta</code>, to be used with <a href="https://www.stata.com/" class="external-link">Stata</a>;</li>
<li>
<code>electoral_data.sav</code>, to be used with <a href="https://www.ibm.com/spss" class="external-link">SPSS</a>.</li>
</ol>
</div>
<div class="section level2">
<h2 id="different-types-of-electoral-data">Different types of electoral data<a class="anchor" aria-label="anchor" href="#different-types-of-electoral-data"></a>
</h2>
<p><code>electionsBR</code>’s chief function,
<code>elections_tse</code>, contains the argument <code>type</code>
(<code>character</code>), which controls the type of electoral data to
be retrieved. The possible values for <code>type</code> are:</p>
<ul>
<li>
<code>vote_mun_zone</code>: Downloads data on the verification,
disaggregated by cities and electoral zones.</li>
<li>
<code>details_mun_zone</code>: Downloads data on the details,
disaggregated by town and electoral zone.</li>
<li>
<code>legends</code>: Downloads data on the party denomination
(coalitions or parties), disaggregated by cities.</li>
<li>
<code>party_mun_zone</code>: Downloads data on the polls by parties,
disaggregated by cities and electoral zones.</li>
<li>
<code>personal_finances</code>: Downloads data on personal financial
disclosures. Each observation corresponds to a candidate’s
property.</li>
<li>
<code>seats</code>: Downloads data on the number of seats under
dispute in elections.</li>
<li>
<code>vote_section</code>: Downloads data on candidate electoral
results in elections in Brazil by electoral section.</li>
<li>
<code>voter_profile_by_section</code>: Downloads data on the voters’
profile by vote section.</li>
<li>
<code>voter_profile</code>: Downloads data on the voters’
profile.</li>
<li>
<code>social_media</code>: Downloads data on the candidates’ links
to social media in federal elections.</li>
</ul>
<p>Using the <code>type</code> argument, to download electoral results
for 2014 federal elections, for example, you can use:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Download electoral results for 2014 federal elections</span></span>
<span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/elections_tse.html">elections_tse</a></span><span class="op">(</span>year <span class="op">=</span> <span class="fl">2014</span>, type <span class="op">=</span> <span class="st">"vote_mun_zone"</span><span class="op">)</span></span></code></pre></div>
<div class="section level3">
<h3 id="cepesp-data-integration">CEPESP Data Integration<a class="anchor" aria-label="anchor" href="#cepesp-data-integration"></a>
</h3>
<p>The package also provides an alternative API for downloading data
from the <a href="https://cepespdata.io/" class="external-link">CEPESP Data</a> project,
including information on candidates, electoral results, and voters’
profiles. To download data on candidates in the 2018 presidential
election, simply use the following code:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/elections_cepesp.html">elections_cepesp</a></span><span class="op">(</span>year <span class="op">=</span> <span class="fl">2018</span>, type <span class="op">=</span> <span class="st">"candidate"</span>, position <span class="op">=</span> <span class="st">"President"</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="other-functionality">Other functionality<a class="anchor" aria-label="anchor" href="#other-functionality"></a>
</h2>
<p>The <code>electionsBR</code> package also includes additional
functionality that may be useful for users. For example, the
<code>uf_br</code> function returns a <code>character</code> vector with
a list of state abbreviations:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/uf_br.html">uf_br</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>To obtain a list of party abbreviations, use:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/parties_br.html">parties_br</a></span><span class="op">(</span><span class="va">year</span><span class="op">)</span></span></code></pre></div>
<p>In recent years, the TSE has made available data on presidential
elections in separate files (indicated by the <code>BR</code> or
<code>_BR</code> suffix). To download these files, use the
<code>br_archive</code> argument as follows:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Download electoral results for 2014 federal elections</span></span>
<span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/elections_tse.html">elections_tse</a></span><span class="op">(</span>year <span class="op">=</span> <span class="fl">2014</span>, type <span class="op">=</span> <span class="st">"vote_mun_zone"</span>, br_archive <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>To obtain the TSE’s official README files that describe the variables
in each type of electoral data, make sure to set <code>readme_pdf</code>
to <code>TRUE</code>:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Download candidates' social media information for 2022 elections</span></span>
<span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/elections_tse.html">elections_tse</a></span><span class="op">(</span>year <span class="op">=</span> <span class="fl">2014</span>, type <span class="op">=</span> <span class="st">"social_media"</span>, readme_pdf <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<div class="section level3">
<h3 id="exporting-brazilian-electoral-data">Exporting Brazilian electoral data<a class="anchor" aria-label="anchor" href="#exporting-brazilian-electoral-data"></a>
</h3>
<p>Most <code>electionsBR</code>’s functions accept an
<code>export</code> argument (<code>logical</code>, must be
<code>TRUE</code> or <code>FALSE</code>; defaults to the latter) that
controls whether the functions should export the retrieved data to <a href="https://www.stata.com/" class="external-link">Stata</a> and <a href="https://www.ibm.com/spss" class="external-link">SPSS</a> files or not.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/elections_tse.html">elections_tse</a></span><span class="op">(</span><span class="fl">2010</span>, export <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="removing-utf-8-special-characters-from-texts">Removing UTF-8 special characters from texts<a class="anchor" aria-label="anchor" href="#removing-utf-8-special-characters-from-texts"></a>
</h3>
<p>By default, <code>electionsBR</code>’s functions maintain original
encoding (<code>Latin-1</code>) in special characters. To convert
strings to <code>ASCII</code>, set the <code>ascii</code> argument to
<code>TRUE</code>.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/elections_tse.html">elections_tse</a></span><span class="op">(</span><span class="fl">2010</span>, ascii <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>Using Mac OS, this option may cause errors (or may retrieve
incomplete data for the 2016 elections). To avoid these issues, use the
<code>encoding</code> optional argument as follows:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/elections_tse.html">elections_tse</a></span><span class="op">(</span><span class="fl">2010</span>, ascii <span class="op">=</span> <span class="cn">TRUE</span>, encoding <span class="op">=</span> <span class="st">"Latin-1"</span><span class="op">)</span></span></code></pre></div>
<p><code>encoding</code> may also be set to <code>UTF-8</code> or other
valid encodings.</p>
</div>
<div class="section level3">
<h3 id="filtering-results-by-state">Filtering results by state<a class="anchor" aria-label="anchor" href="#filtering-results-by-state"></a>
</h3>
<p>Sometimes, getting state electoral data, and not for the whole
country, is what one needs. To achieve this, use the <code>uf</code>
optional argument (available in most functions):</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="co"># Electoral results for the 2010 federal elections in Sao Paulo (SP)</span></span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">elections_tse</span>(<span class="dv">2010</span>, <span class="at">uf =</span> <span class="st">"SP"</span>)</span>
<span id="cb13-3"><a href="#cb13-3" tabindex="-1"></a>http<span class="sc">:</span><span class="er">//</span>www.tse.jus.br<span class="sc">/</span>eleicoes<span class="sc">/</span>estatisticas<span class="sc">/</span>repositorio<span class="sc">-</span>de<span class="sc">-</span>dados<span class="sc">-</span>eleitorais</span>
<span id="cb13-4"><a href="#cb13-4" tabindex="-1"></a><span class="co"># Electoral results for the 2010 federal elections in Minas Gerais (MS)</span></span>
<span id="cb13-5"><a href="#cb13-5" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">elections_tse</span>(<span class="dv">2010</span>, <span class="at">uf =</span> <span class="st">"mg"</span>)</span>
<span id="cb13-6"><a href="#cb13-6" tabindex="-1"></a></span>
<span id="cb13-7"><a href="#cb13-7" tabindex="-1"></a><span class="co"># Electoral results for the 2010 federal elections in RS, SC, and PR</span></span>
<span id="cb13-8"><a href="#cb13-8" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">elections_tse</span>(<span class="dv">2010</span>, <span class="at">uf =</span> <span class="fu">c</span>(<span class="st">"RS"</span>, <span class="st">"SC"</span>, <span class="st">"PR"</span>))</span></code></pre></div>
<p>Notice that the input must be a <code>character</code> vector – with
case insensitive state abbreviations (MG, Mg, mG, and mg are all equally
valid inputs).</p>
</div>
</div>
<div class="section level2">
<h2 id="how-elections-in-brazil-work">How Elections in Brazil Work<a class="anchor" aria-label="anchor" href="#how-elections-in-brazil-work"></a>
</h2>
<ul>
<li><p>Federal elections and state elections are conducted
simultaneously, including the election of the president and vice
president, senators and alternates, governors and vice governors,
federal deputies, and state deputies. Two years later, municipal
elections are held for mayors, vice mayors, and city councils. It is
important to note that the distinction is based on the federal level,
not on the branches of government. The executive and legislative
representatives are elected at the same time.</p></li>
<li><p>In the case of elections for president and vice president,
governor and vice governor, senator and alternates, and mayor and vice
mayor, the majoritarian system is used, where the candidate with the
most votes is elected. If none of the candidates for president,
governor, or mayor in a municipality with over 200,000 inhabitants
reaches an absolute majority of valid votes, a second round will be held
with the two most voted candidates.</p></li>
<li><p>For city council elections, state deputies, and federal deputies,
the proportional criterion is used, which takes into account not only
the votes received by the candidate but also the votes received by their
party. Therefore, the candidate with the highest number of votes may not
always be elected. The allocation of seats depends on the performance of
the entire group of candidates from the party or alliance.</p></li>
</ul>
<div class="section level3">
<h3 id="official-documentation">Official documentation<a class="anchor" aria-label="anchor" href="#official-documentation"></a>
</h3>
<p>The internal documentation of the <code>electionsBR</code> package is
based entirely on the official documentation provided by the TSE in the
Repositório de Dados Eleitorais. To access the documentation for each
type of electoral data, set the <code>readme_pdf</code> argument in the
<code>elections_tse</code> to <code>TRUE</code> and the package will
save the relevant documentation in PDF format.</p>
</div>
</div>
<div class="section level2">
<h2 id="disclaimer">Disclaimer<a class="anchor" aria-label="anchor" href="#disclaimer"></a>
</h2>
<p>The <code>electionsBR</code> package does not modify or filter the
data provided by the TSE. Additionally, users must be aware that the TSE
updates its databases frequently, so it is important to note the version
of the electoral data used. However, we are not responsible for any
issues with the data that users may encounter.</p>
</div>
<div class="section level2">
<h2 id="how-to-cite">How to cite<a class="anchor" aria-label="anchor" href="#how-to-cite"></a>
</h2>
<p>To cite <code>electionsBR</code> in publications, please use:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/citation.html" class="external-link">citation</a></span><span class="op">(</span><span class="st">"electionsBR"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## To cite package 'electionsBR' in publications use:</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##   Meireles, Fernando; Silva, Denisson; Costa, Beatriz. (2016).</span></span>
<span><span class="co">##   electionsBR: R functions to download and clean Brazilian electoral</span></span>
<span><span class="co">##   data. URL: http://electionsbr.com/novo/</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## A BibTeX entry for LaTeX users is</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##   @Manual{,</span></span>
<span><span class="co">##     title = {{electionsBR}: {R} Functions to Download and Clean {B}razilian Electoral Data},</span></span>
<span><span class="co">##     author = {Fernando Meireles and Denisson Silva and Beatriz Costa},</span></span>
<span><span class="co">##     year = {2016},</span></span>
<span><span class="co">##     url = {http://electionsbr.com/novo/},</span></span>
<span><span class="co">##     encoding = {UTF-8},</span></span>
<span><span class="co">##   }</span></span></code></pre>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Denisson Silva, Fernando Meireles.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
